<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>rl</title>
</head>
<body>
    <div id="calendar" class="rl">

    </div>
    <div id="control">
        <div id="pre">
            pre
        </div>
        <div id="next">
                next
        </div>
    </div>
</body>
<script>
    let pre = document.getElementById('pre')
    let next = document.getElementById('next')

    let curDate = new Date();
    let year = curDate.getFullYear();
    let month = curDate.getMonth();
    let day = curDate.getDate();

    createCalendar(year,month)

    pre.onclick = ()=>{
        month = month - 1
        if (month < 1) {
            year = year - 1;
            month = 12;
        }
        createCalendar(year,month)
    }

    next.onclick = ()=>{
        month = month + 1;
        if (month > 12) {
            year = year + 1;
            month = 1;
        }
        createCalendar(year,month)
    }











    function createCalendar(year,month){
    let firstDay = new Date(year,month,1);
    let firstDayWeek = firstDay.getDay();//获取当月第一天是星期几

    let lastDay = new Date(year,month+1,0)
    let lastDayDate = lastDay.getDate();//获取当月最后一天是什么时候

    let line = Math.ceil((lastDayDate+firstDayWeek)/7);//获取当月有几个星期

    document.write(`
        <table border='1' align='center' width='220' cellspacing='0'>
            <tr>
                <th align='center'>日</th>
                <th align='center'>一</th>
                <th align='center'>二</th>
                <th align='center'>三</th>
                <th align='center'>四</th>
                <th align='center'>五</th>
                <th align='center'>六</td>
            </tr>
    `);

    for (let i = 0; i < line; i++) {
        document.write('<tr>');
        let current,lineIndex;
        for (let j = 0; j < 7; j++) {
            lineIndex=i*7+j;
            current = lineIndex-firstDayWeek+1;//获取本月的每一个日期
            console.log(lineIndex,current);
            current = (current<=0 || current>lastDayDate)? "&nbsp;" : current; 
            current === day ? document.write ("<td align='center' bgcolor='red'>" + current + "</td>") : document.write ("<td align='center'>" + current + "</td>");
        }
        document.write("</tr>");
    }
    document.write("</table>");

    }

    
</script>

<!-- <script>
    function is_leap(year) { 
       return (year%100==0?res=(year%400==0?1:0):res=(year%4==0?1:0));
    } //是否为闰年
    
    var nstr=new Date(); //当前Date资讯
    var ynow=nstr.getFullYear(); //年份
    var mnow=nstr.getMonth(); //月份
    var dnow=nstr.getDate(); //今日日期
    var n1str=new Date(ynow,mnow,1); //当月第一天Date资讯
    
    var firstday=n1str.getDay(); //当月第一天星期几
    
    var m_days=new Array(31,28+is_leap(ynow),31,30,31,30,31,31,30,31,30,31); //各月份的总天数
    
    var tr_str=Math.ceil((m_days[mnow] + firstday)/7); //表格所需要行数
    
    //打印表格第一行（有星期标志）
    document.write ("<table border='1' align='center' width='220' cellspacing='0'><tr><td align='center'>日</td><td align='center'>一</td><td align='center'>二</td><td align='center'>三</td><td align='center'>四</td><td align='center'>五</td><td align='center'>六</td></tr>");
    
    for(i=0;i<tr_str;i++) { //表格的行
       document.write("<tr>");
       for(k=0;k<7;k++) { //表格每行的单元格
          idx=i*7+k; //单元格自然序列号
          date_str=idx-firstday+1; //计算日期
          (date_str<=0 || date_str>m_days[mnow]) ? date_str="&nbsp;" : date_str=idx-firstday+1; //过滤无效日期（小于等于零的、大于月总天数的）
          //打印日期：今天底色为红
          date_str==dnow ? document.write ("<td align='center' bgcolor='red'>" + date_str + "</td>") : document.write ("<td align='center'>" + date_str + "</td>");
       }
       document.write("</tr>"); //表格的行结束
    }
    
    document.write("</table>"); //表格结束
    
    </script> -->
</html>