<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>rl</title>
    <style>
        .current{
            color:red;
        }
    </style>
</head>

<body>
    <div id="calendar" class="rl">
        <div id="control">
            <span id="pre">pre</span>
            <span id="current"></span>
            <span id="next">next</span>
        </div>
        <div id="calendarBody"></div>
    </div>
</body>
<script>
    let pre = document.getElementById('pre')
    let next = document.getElementById('next')
    let current = document.getElementById('current')
    let rl = document.getElementById('calendarBody')

    //当前时间
    let curDate = new Date();
    let year = curDate.getFullYear();
    let month = curDate.getMonth();
    let day = curDate.getDate();

    currentDate(year,month,day)
    createRL(year,month,day)

    pre.onclick = () => {
        month = month - 1
        if (month < 1) {
            year = year - 1;
            month = 12;
        }
        createRL(year, month,day)
        currentDate(year,month,day)
    }

    next.onclick = () => {
        month = month + 1;
        if (month > 12) {
            year = year + 1;
            month = 1;
        }
        createRL(year, month,day)
        currentDate(year,month,day)
    }












    function currentDate(year,month,day){
        month=month +1 
        if (month < 1) {
            year = year - 1;
            month = 12;
        }
        if (month > 12) {
            year = year + 1;
            month = 1;
            console.log("a")
        }
        current.innerText = year + "年" + month + "月" + day + "日"
    }
    function createRL(year,month,day) {
        rl.innerHTML=""
        let firstDay = new Date(year, month, 1);
        let firstDayWeek = firstDay.getDay();//获取当月第一天是星期几

        let lastDay = new Date(year, month + 1, 0)
        let lastDayDate = lastDay.getDate();//获取当月最后一天是什么时候

        let line = Math.ceil((lastDayDate + firstDayWeek) / 7);//获取当月有几个星期

        let table = document.createElement('table')
        let tr = document.createElement('tr')

        let head = ['日', '一', '二', '三', '四', '五', '六']
        for (let i = 0; i < 7; i++) {
            let th = document.createElement('th')
            th.innerText = head[i]
            tr.appendChild(th)
        }

        table.appendChild(tr)
        rl.appendChild(table)



        for (let i = 0; i < line; i++) {
            let tr = document.createElement('tr')
            let current, lineIndex;
            for (let j = 0; j < 7; j++) {
                let td = document.createElement('td')
                lineIndex = i * 7 + j;
                current = lineIndex - firstDayWeek + 1;
                current = (current <= 0 || current > lastDayDate) ? "" : current;
                td.innerText = current;
                if (current === day) {
                    td.className += "current"
                }
                tr.appendChild(td)
            }
            table.appendChild(tr)
        }


    }




    // createCalendar(year, month)

    // pre.onclick = () => {
    //     month = month - 1
    //     if (month < 1) {
    //         year = year - 1;
    //         month = 12;
    //     }
    //     createCalendar(year, month)
    // }

    // next.onclick = () => {
    //     month = month + 1;
    //     if (month > 12) {
    //         year = year + 1;
    //         month = 1;
    //     }
    //     createCalendar(year, month)
    // }











    // function createCalendar(year, month) {
    //     let firstDay = new Date(year, month, 1);
    //     let firstDayWeek = firstDay.getDay();//获取当月第一天是星期几

    //     let lastDay = new Date(year, month + 1, 0)
    //     let lastDayDate = lastDay.getDate();//获取当月最后一天是什么时候

    //     let line = Math.ceil((lastDayDate + firstDayWeek) / 7);//获取当月有几个星期

    //     document.write(`
    //     <table border='1' align='center' width='220' cellspacing='0'>
    //         <tr>
    //             <th align='center'>日</th>
    //             <th align='center'>一</th>
    //             <th align='center'>二</th>
    //             <th align='center'>三</th>
    //             <th align='center'>四</th>
    //             <th align='center'>五</th>
    //             <th align='center'>六</td>
    //         </tr>
    // `);

    //     for (let i = 0; i < line; i++) {
    //         document.write('<tr>');
    //         let current, lineIndex;
    //         for (let j = 0; j < 7; j++) {
    //             lineIndex = i * 7 + j;
    //             current = lineIndex - firstDayWeek + 1;//获取本月的每一个日期
    //             console.log(lineIndex, current);
    //             current = (current <= 0 || current > lastDayDate) ? "&nbsp;" : current;
    //             current === day ? document.write("<td align='center' bgcolor='red'>" + current + "</td>") : document.write("<td align='center'>" + current + "</td>");
    //         }
    //         document.write("</tr>");
    //     }
    //     document.write("</table>");

    // }


</script>

</html>